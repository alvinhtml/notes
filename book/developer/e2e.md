# 自动化测试

## 为什么要自动化测试：

开发过程都是打开浏览器刷新页面点点点才能确定 UI 组件工作情况是否符合自己预期。接入自动化测试以后，通过脚本代替这些手动点击，接入代码 watch 后每次保存文件都能快速得知自己的的改动是否影响功能，节省了很多时间，毕竟机器干事情比人总是要快得多。

## E2E 测试

E2E 是 End to End 的简称，是黑盒测试的一种。
编写测试用例，模拟用户操作，确保组件（或零件）间通信正常，数据流传递如逾期。

### 单元测试

把代码看成一个个组件，对每个组件进行单独测试
测试内容主要是组件内每一个函数的返回结果是不是和期望值一样
代码覆盖率是指代码中每个函数的每种情况的测试情况

### E2E 测试

把程序当做黑盒子，对于测试的输入，看能否得到预期得到的结果
一般用来测试需求可否正确完成
适用于代码重构

## Selenium

Selenium WebDriver 是我们都知道和喜爱的开源自动化工具。随着历史从 IDE 的卑微开始，转变为 2.0 硒硒又名 webdriver 的，Selenium 已经成为许多现代软件团队的基础测试自动化工具包。

大多数人都熟悉 Selenium 的使用 - 它使用每个浏览器对自动化的原生支持直接调用浏览器。通过使用兼容的编程语言在 Selenese 中编写脚本，您可以运行测试，就像您自己驾驶浏览器一样。

虽然 Selenium 的学习曲线可能很陡，并且需要至少一种编程语言的知识，但它拥有庞大的活跃用户社区，甚至还拥有年度用户会议。

Selenium 的基础之一是能够在最流行的浏览器上进行测试，使其成为跨浏览器测试的必要条件。

随着 Selenium 的测试越来越受欢迎，它不仅成为许多自动化策略的基础，而且还成为许多第三方工具（如 CrossBrowserTesting）不可或缺的一部分。一旦您知道如何使用 Selenium，您就可以使用这些云测试工具访问数千个浏览器并利用并行测试来缩短测试时间。

## Cypress

那么 Cypress 与 Selenium 的不同之处是什么？它们的相同之处又是什么？

首先，据说 Cypress 比 Selenium 更容易入门，你需要做的就是下载安装包，接下里启动运行的时候，所有驱动程序和依赖项都会自动安装。另一方面，使用 Selenium，您需要花费更多时间来完成所有操作。

Selenium 的一个优点是它支持大多数主要的编程语言，包括 Java，Perl PHP，Python，Ruby 和 C＃，因此，如果您的团队已经使用其中一种语言，Cypress 可能并不理想，因为它只支持 JavaScript 的。

此外，由于 Cypress 测试是使用 Mocha 和 Chai 编写的，因此语法与大多数 Javascript 用户理解的内容相呼应。这意味着如果您使用 Javascript，开始使用 Cypress 将特别容易。但是，如果您对其他语言比较熟悉，那将会相当复杂。

Cypress 几乎充当“免费增值”模式。与 Selenium 类似，除非您使用付费工具进行集成，否则您还 x 需要通过利用付费仪表板添加 Cypress 的核心功能，该仪表板包含一个允许您使用 DOM 快照轻松调试测试的测试运行器，并包含用于私有的视频存储项目。

Selenium 和 Cypress 的架构方式也各不相同。Selenium 由绑定或库和控制浏览器的 WebDriver 组成。这两个组件都是通过 JSON 网络工作。

或者，虽然 Cypress 用于 UI 测试，但它使用自己独特的 DOM 操作，并直接在浏览器中运行，无需网络通信。出于这个原因，Cypress 经常被认为是一个开发人员友好的测试自动化工具，因为这通常会导致 Selenium 让它们感到郁闷。

在 Electron 应用程序之上使用不同的体系结构也使 Cypress 能够非常接近被测试的 Web 应用程序，以便我们可以执行在 Selenium 中无法做到的事情，例如对 DOM API 进行存根。

Selenium 与 Cypress 之间的最大差距之一是，虽然 Selenium 针对不同的浏览器运行，但如前所述，Cypress 仅支持 Chrome。Selenium 的浏览器支持通常是使用它的人不可或缺的一部分，使得 Cypress 在跨浏览器测试方面严重缺乏。

对于那些发现在多个浏览器上检查其网站而不仅仅是让他们的代码难以实现的软件团队而言，找到解决这一缺陷的方法可能对 Cypress 用户构成挑战。

## Selenium VS Cypress

Cypress 和 Selenium 具有类似的目的，可以通过两种不同的方式实现。

Selenium 是一个库，但需要一个单元测试框架或一个运行器和一个断言库来构建它的功能。Cypress 为运行自动化测试提供了一个强大而完整的框架，但通过将用户限制在特定的框架和语言中，可以从 Selenium 中获得一些自由。

如果您在构建测试自动化框架时不知道自己在做什么，Cypress 可能是个不错的选择。

另外要记住的是，如果你看看 Cypress 是如何构建的，它主要是一个单元测试工具，最适合以 Javascript 为中心的开发团队。一旦您偏离这些细节并且您的团队决定尝试其他测试自动化方法，您会发现 Selenium 可以更好地适应这些成长的痛苦。

作为开发人员为开发人员开发的工具，它不再是 Selenium 的替代品，更是一种向开发人员介绍测试自动化的方法。

与大多数测试自动化实例一样，您选择的工具和您遵循的方法在很大程度上取决于您的团队决定什么以及哪些最适合您的组织。然而，Selenium 最后一步的想法被误导了。

## 参考

- [前端 e2e 自动化测试](https://www.jianshu.com/p/6f1c0bd2842b)
- [为什么选择 Cypress？](https://docs.cypress.io/guides/overview/why-cypress#Who-uses-Cypress)
- [Selenium 与 Cypress，一场关于 WebDriver 的革命](https://www.jianshu.com/p/f5a67e7031ed)
