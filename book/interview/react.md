## hooks

## hooks 的定义

hooks 直译是 “钩子”。通常指：

```
系统运行到某一时期时，会调用被注册到该时机的回调函数。
```

在 react 中，hooks 则有了全新的含义：

```
一系列以 “use” 作为开头的方法，它们提供了让你可以完全避开 class 式写法，在函数式组件中完成生命周期、状态管理、逻辑复用等几乎全部组件开发工作的能力。
```

简化一下：

```
一系列方法，提供了在函数式组件中完成开发工作的能力。
```

而在 vue 中， hooks 的定义可能更模糊：

```
在 vue 组合式 API 里，以 “use” 作为开头的，一系列提供了组件复用、状态管理等开发能力的方法。
```

### hooks 命名规范和指导思想

在 react 官方文档里，对 hooks 的定义和使用提出了 “一个假设、两个只在” 核心指导思想。

- **一个假设**： 假设任何以 `use` 开头并紧跟着一个大写字母的函数就是一个 Hook。
- **第一个只在**： 只在 React 函数组件中调用 Hook，而不在普通函数中调用 Hook。
- **第二个只在**： 只在最顶层使用 Hook，而不要在循环，条件或嵌套函数中调用 Hook。

> Eslint 通过判断一个方法是不是大坨峰命名来判断它是否是 React 函数。

### 为什么需要 hooks

- 更好的状态复用

1. 方法和属性好追溯吗，谁产生的，哪儿来的一目了然；
2. 不会有重名、覆盖问题，内部的变量在闭包内，返回的变量支持 as 别名；
3. 一个 hooks 可以多次使用。

- 代码组织高度聚合，可阅读性提升，伴随而来的便是效率提升，bug 减少
- 比 class 组件更容易理解，不在需要 `bind(this)`
- 友好的渐进式，可以在项目里一边写 class 组件，一边写 Hooks 组件

### vue 和 react 自定义 Hook 的异同

相似点：总体思路是一致的 都遵照着 "定义状态数据"，"操作状态数据"，"隐藏细节" 作为核心思路
差异点：setup 中的 hooks 只会被执行一次，但函数中的 hooks 可能会执行多次，因此需要比 vue 更多的心智开销
